@import url(variables.css);

input[type="search"]::-webkit-search-cancel-button {
    -webkit-appearance: none;
    height: 1em;
    width: 1em;
    border-radius: 50em;
    background: url(https://pro.fontawesome.com/releases/v5.10.0/svgs/solid/times-circle.svg) no-repeat 50% 50%;
    background-size: contain;
    color: var(--fg);
    opacity: 0;
    pointer-events: none;
}

input[type="search"]:focus::-webkit-search-cancel-button {
    opacity: .3;
    pointer-events: all;
    filter: invert(1);
}

html {
    cursor: text;
}

html, body {
    margin: 0;
    height: 100%;
    overflow: hidden
}

#dashboard {
    display: grid;
    grid-template-rows: 1.6rem 1fr 1.6rem 1.6rem;

    #top-bar {
        label {
            line-height: 1.6rem;
        }
    }

    #bottom-bar {
        label {
            line-height: 1.6rem;
        }
    }
}

#content {
    display: grid;
}

#feedback {
    max-height: fit-content;
    align-self: end;
}

.command-line {
    display: grid;
    grid-template:   [prompt] "p c" [prompt];
    grid-template-columns: auto 1fr;

    border-color: var(--faded-fg);

    .command-prompt {
        grid-area: p;
        padding-block: unset;
        padding-left: 0.1rem;
        line-height: 1.6rem;
    }

    .command-input {
        grid-area: c;
        height: 1.6rem;
        line-height: 1.6rem;
        border: unset;
        outline: none;
        caret-shape: block;
    }

    .command-input:focus {
        outline: none;
        border: unset;
    }
}

.triangle {
    display: inline-block;
    border-left: 13px solid;
    border-top: 13px solid transparent;
    border-bottom: 13px solid transparent;
}

.arrow-right {
    display: inline-block;
    position: relative;
}

.arrow-right::after {
    color: currentColor;
    border-left: 13px solid;
    border-top: 13px solid transparent;
    border-bottom: 13px solid transparent;
    display: inline-block;
    content: '';
    position: absolute;
    right: -13px;
}

.arrow-left {
    display: inline-block;
    position: relative;
}

.arrow-left::after {
    color: inherit;
    border-right: 13px solid;
    border-top: 13px solid transparent;
    border-bottom: 13px solid transparent;
    display: inline-block;
    content: '';
    position: absolute;
    left: -13px;
}

.command-line-parser:hover {
    .legend {
        color: var(--accent);
    }

    border-color: var(--accent);
}


.todo-form-grid {
    display: grid;
    grid-template:   [primary-fields-top] "t t s f" [primary-fields-bottom]
                   [secondary-fields-top] "d d d d" [secondary-fields-bottom]
                            [buttons-top] "b . . ." [buttons-bottom];
}

@media screen and (max-width: 80rem) {
    .todo-form-grid {
        display: grid;
        grid-template:    [primary-fields-top] "t t" [primary-fields-bottom]
                        [secondary-fields-top] "s f" [secondary-fields-bottom]
                             [third-field-top] "d d" [third-field-bottom]
                                 [buttons-top] "b ." [buttons-bottom];
    }
}

@media screen and (max-width: 40rem) {
    .todo-form-grid {
        display: grid;
        grid-template:    [primary-fields-top] "t" [primary-fields-bottom]
                        [secondary-fields-top] "s" [secondary-fields-bottom]
                             [third-field-top] "f" [third-field-bottom]
                              [four-field-top] "d" [four-field-bottom]
                                 [buttons-top] "b" [buttons-bottom];
    }
}

.todo-form-title {
    grid-area: t;
}

.todo-form-start {
    grid-area: s;
}

.todo-form-target {
    grid-area: f;
}

.todo-form-description {
    grid-area: d;
}

.todo-form-submit-button {
    grid-area: b;
}

.todo-grid {
    display: grid;
    max-width: 100%;
    gap: 1rem;
    grid-template-columns: repeat(auto-fill, minmax(30ch, 1fr));
}

.todo-item {
    display: grid;
    grid-template: [title-top] "t    t    t    t" [title-bottom]
                   [dates-top] "s    s    f    f" [dates-bottom]
             [description-top] "d    d    d    d" [description-bottom]
                 [buttons-top] "c    c    e    e" [buttons-bottom]
                             /  1fr  1fr  1fr  1fr;
}

.title-field {
    grid-area: t;
}

.start-field {
    grid-area: s;
}

.target-field {
    grid-area: f;
}

.todo {
    box-sizing: border-box;
    border-width: medium;
    border-style: solid;
    border-color: var(--graphical-fg);
    border-radius: unset;
}

.todo:hover {
    border-color: var(--fg);
}

.todo button {
    min-height: var(--rhythm);
    background: var(--bg);
    box-shadow: unset;
    border: unset;
    border-radius: unset;
}

.todo :is(button,.\<button\>):hover, :is(button,.\<button\>):focus-visible {
    filter: brightness(1.1);
    box-shadow: 0 3px 6px -2px var(--accent);
    text-decoration: none;
}

.fade-me-out.htmx-swapping {
    opacity: 0;
    transition: opacity 1s ease-out;
}